# Элементная база вычислительной системы: логические элементы, триггеры

**[Логические элементы](https://ru.wikipedia.org/wiki/Логические_элементы)** — устройства, предназначенные для обработки информации в цифровой форме. Физически логические элементы могут быть выполнены механическими, электромеханическими (на электромагнитных реле), электронными (на диодах и транзисторах), пневматическими, гидравлическими, оптическими и др. В настоящее время в цифровых устройствах доминируют электронные логические элементы на базе полевых транзисторов. В поисках более совершенных технологий исследуются квантовые устройства, биологические молекулы, фононные тепловые системы.
После доказательства в 1946 г. теоремы Джона фон Неймана об экономичности показательных позиционных систем счисления стало известно о преимуществах двоичной и троичной систем счисления по сравнению с десятичной системой счисления. От десятичных логических элементов перешли к двоичным логическим элементам. Двоичность и троичность позволяет значительно сократить количество операций и элементов, выполняющих эту обработку, по сравнению с десятичными логическими элементами.
Логические элементы выполняют логическую функцию (операцию) над входными сигналами (операндами, данными).

---

**[Вентиль](https://ru.wikipedia.org/wiki/Логический_вентиль)** — базовый логический элемент цифровой схемы, выполняющий элементарную логическую операцию, преобразуя таким образом множество входных логических сигналов в выходной логический сигнал. Логика работы вентиля основана на битовых операциях с входными цифровыми сигналами в качестве операндов. При создании цифровой схемы вентили соединяют между собой, при этом выход используемого вентиля должен быть подключён к одному или к нескольким входам других вентилей. 
В цифровой электронике логический уровень сигнала представлен в виде уровня напряжения (попадающего в один из двух диапазонов) или в виде значения тока. Это зависит от типа используемой технологии построения электронной логики. Поэтому любой тип электронного вентиля требует наличия питания для приведения выходного сигнала к необходимым уровням сигнала. 

Основой для изготовления микросхем служат кристаллы химически чистого кремния. Получение таких кристаллов – весьма сложный технологический процесс. На поверхности полупроводника можно формировать различные структуры. Если в локальные участки кристалла чистого кремния вводить небольшое количество примесей какого-либо пятивалентного вещества, например мышьяка или сурьмы, можно получить участки полупроводника n-типа, в котором проводимость возникает за счет наличия свободных электронов. Если же в другие участки вводить примеси трехвалентного вещества, например индия, то можно получить участки полупроводника p-типа, где проводимость обеспечивается за счет так называемых «дырок» - нехватки электрона в связях кристаллической решетки. Кроме этого, на поверхность кристалла можно наносить изолирующие слои, и слои металла. Если располагать эти элементы в определенном порядке, можно получать различные электронные компоненты с заданными электрическими свойствами.

---

### Транзистор

<img width="150" align="right" src="https://raw.githubusercontent.com/egormkn/ifmo-kt/master/course1/computer_architecture/images/transistor.png">

В частности, на поверхности кремниевого кристалла можно сформировать **[транзистор](https://ru.wikipedia.org/wiki/Транзистор)** – основной электронный компонент всей полупроводниковой электроники. Существует два основных вида транзисторов: *полевые*, в которых управление током в выходной цепи осуществляется за счёт изменения входного напряжения, и *биполярные* – в которых управление осуществляется за счёт изменения тока. Небольшое изменение входных величин может приводить к существенно большему изменению выходного напряжения и тока. Это усилительное свойство транзисторов используется в аналоговой технике (аналоговые ТВ, радио, связь и т. п.), где сейчас доминируют биполярные транзисторы. Другой важнейшей отраслью электроники является цифровая техника (компьютеры), где, напротив, биполярные транзисторы почти полностью вытеснены полевыми.

В цифровой электронике на сегодняшний день чаще всего используются так называемые МОП-транзисторы. Сокращение «МОП» означает комбинацию основных составляющих материалов транзисторов – Металл-Оксид-Полупроводник (также часто встречаются названия «МДП» – Металл-Диэлектрик-Полупроводник и «MOSFET» - metal-oxide-semiconductor field effect transistor).

---

Если в полупроводнике n-типа с отрицательными носителями заряда имеются две области p-типа с положительными носителями заряда, то проводимостью между этими областями можно управлять при помощи изолированного электрода. Если на этом электроде создать отрицательный заряд, то за счет электростатической индукции в полупроводнике возникает область повышенной концентрации положительных  зарядов, обеспечивающая проводимость между областями p-типа. Такой транзистор называется p-канальным и открыт тогда, когда на управляющем электроде присутствует отрицательный по отношению к подложке потенциал.

Если же  изменить сочетание проводимости областей транзистора, т.е. в полупроводнике p-типа c положительными носителями зарядов создать области n-типа с отрицательными носителями, то проводимость появится при наличии на изолированном электроде положительного заряда. Такой транзистор называется n-канальным, и открывается тогда, когда на управляющем электроде присутствует положительный по отношению к подложке потенциал.


![P-канальный и N-канальный транзисторы](https://raw.githubusercontent.com/egormkn/ifmo-kt/master/course1/computer_architecture/images/transistor-types.png)

P-канальные и N-канальные транзисторы являются как бы зеркальным отражением друг друга. Пару таких транзисторов, соединенных последовательно называют, комплементарной парой. А к названию технологии, использующей такие пары транзисторов добавилась буква «К» - КМОП («CMOS» - complementary metal-oxide-semiconductor).

---

### Инвертор

Пара комплементарных МОП-транзисторов, соединенных последовательно и имеющая общий вход представляет собой простейший логический элемент – инвертор **«НЕ» (NOT)**.

![Инвертор на КМОП-транзисторах](https://raw.githubusercontent.com/egormkn/ifmo-kt/master/course1/computer_architecture/images/invertor-cmos.png)

Если на входе такой схемы напряжение близко к 0, то нижний транзистор будет закрыт, поскольку этого напряжения окажется недостаточно для формирования проводящего канала. Зато откроется верхний, у которого по отношению к подложке на управляющем электроде окажется максимальное напряжение. Тогда на выходе напряжение станет близко к напряжению питания. И наоборот, если напряжение на входе станет близким к напряжению питания, верхний транзистор закроется, но откроется нижний, и напряжение на выходе станет минимальным. Если напряжение близкое к нулю считать за логический ноль, а близкое к напряжению питания – за логическую единицу, то эта схема будет выполнять логическую функцию «не».

Также инвертор можно реализовать с использованием одного транзистора, но в таком случае необходимо использовать резистор в качестве нагрузки для предотвращения короткого замыкания. 

![Инвертор на транзисторе и резисторе](https://raw.githubusercontent.com/egormkn/ifmo-kt/master/course1/computer_architecture/images/invertor-res.png)

Когда на входе «0», транзистор закрыт, и на выход через резистор подаётся высокое напряжение. При подаче «1» на вход транзистор открывается, и выход оказывается замкнут на землю. Ток также течёт через транзистор, но сразу уходит в землю, не попадая на выход, инвертор при этом выдаёт «0». Минус этого инвертора – высокое энергопотребление и тепловыделение, энергия расходуется постоянно, и почти полностью переходит в тепло. Поэтому в современных устройствах используются логические элементы на КМОП-парах.

---

### Основное соглашение цифровой электроники

Для того, чтобы обсуждать логические функции различных элементов необходимо договориться о некоторых соглашениях.

Во-первых, необходимо решить, что следует считать нулем, а что – единицей. Чаще всего используется соглашение, когда за логический ноль принимается напряжение менее 1/10 напряжения питания, а за логическую единицу – более половины напряжения питания. Для элементов, изготовленных по разным технологиям, значения напряжений могут быть разными и для их совместного использования могут потребоваться специальные согласующие элементы. Соглашение, при котором за логический ноль принимается низкое напряжение, а за логическую единицу – высокое, называется соглашением положительной логики. Можно поступить и наоборот. За логическую единицу принять низкое напряжение, за логический ноль – высокое. Это называется соглашением отрицательной логики. Мы будем пользоваться положительным соглашением.

Во-вторых, при изменении логических значений на входе элемента, состояние его выхода меняется не мгновенно. Требуется время для переключения транзисторов, перезарядки емкостей и других процессов. По прошествии какого-то времени эти процессы завершаются, и выход элемента приобретает устойчивое состояние. Это состояние соответствует логической функции элемента. Во время между изменением входного сигнала данного элемента и завершением переходных процессов в элементе, состояние его выхода непредсказуемо. Это время называют максимальным временем задержки данного элемента. При прохождении сигнала последовательно через несколько логических элементов, времена задержки складываются. Состояние выхода схемы можно считать достоверным только по прошествии времени, равного сумме максимальных задержек последовательно включенных элементов схемы, от момента изменения входного сигнала.

---

Подобным образом можно строить и более сложные логические элементы. Если соединить четыре транзистора способом, изображенным на рисунке, получится логический элемент **«И-НЕ» (NAND)**.

![Логический элемент И-НЕ](https://raw.githubusercontent.com/egormkn/ifmo-kt/master/course1/computer_architecture/images/nand.png)

Когда на обоих входах этой схемы будет присутствовать напряжение логической единицы, два верхних транзистора будут закрыты, но откроются оба нижних транзистора, и на выходе схемы появится напряжение логического нуля. Если на каком-либо из входов напряжение будет отсутствовать, т.е. окажется логический ноль, будет открыт один из верхних транзисторов, но закрыт один из нижних. В этом случае на выходе будет логическая единица. Если логический ноль будет присутствовать на обоих входах, будут открыты оба верхних транзистора и закрыты оба нижних. На выходе в этом случае также будет логическая единица. Таким образом, на выходе схемы будет логический ноль только тогда, когда на обоих входах будет присутствовать логическая единица.

Похожая схема реализует логическую функцию **«ИЛИ-НЕ» (NOR)**.

![Логический элемент ИЛИ-НЕ](https://raw.githubusercontent.com/egormkn/ifmo-kt/master/course1/computer_architecture/images/nor.png)

Если в этой схеме хотя бы на одном из входов будет присутствовать напряжение логической единицы, будет открыт один из нижних транзисторов, но какой-то из верхних будет закрыт, и на выходе будет логический ноль. И только тогда, когда ни на одном из входов не будет логической единицы, на выходе будет единица.

На схемах ниже приведены реализации элементов **И** и **ИЛИ** на КМОП-транзисторах. Первая выдаёт логическую единицу только если на оба входа поступает логическая единица. Вторая выдаёт логическую единицу, если хотя бы на один вход поступает единица.

![Логический элемент И](https://raw.githubusercontent.com/egormkn/ifmo-kt/master/course1/computer_architecture/images/and.png)

![Логический элемент ИЛИ](https://raw.githubusercontent.com/egormkn/ifmo-kt/master/course1/computer_architecture/images/or.png)

Путем различных комбинаций логические элементы можно выражать друг через друга, а также строить из них схемы с более сложными логическими функциями. Любую логическую функцию можно выразить при помощи минимального набора базовых логических элементов. Такой минимальный набор называется базисом. Наиболее прост для понимания базис, состоящий из трех типов элементов – И, ИЛИ, НЕ. На практике, в цифровых устройствах чаще применяются базисы, состоящие из элементов И-НЕ или ИЛИ-НЕ, поскольку такие элементы проще составлять из транзисторов. Любая логическая схема может быть представлена в любом базисе.

Например, в виде комбинации логических элементов ИЛИ-НЕ можно представить логический элемент **«Исключающее ИЛИ» (XOR)**. Этот элемент должен выдавать логическую единицу только в том случае, если два логических значения на его входах не равны друг другу. Другими словами - если единице равен не какой-нибудь из его входов, как в обычном элементе «ИЛИ», а ТОЛЬКО ОДИН из его входов.  
![Логический элемент Исключающее ИЛИ](https://raw.githubusercontent.com/egormkn/ifmo-kt/master/course1/computer_architecture/images/xor.png)

---

### Представление информации физическими сигналами

В ЭВМ широко применяют два способа физического представления сигналов: импульсный и потенциальный. При **импульсном** способе представления сигналов единичному значению некоторой двоичной переменной ставится в соответствие наличие импульса (тока или напряжения), нулевому значению - отсутствие импульса. Длительность импульсного сигнала не превышает один такт синхронизационных импульсов. При **потенциальном** или **статическом** представлении сигналов единичное значение двоичной переменной отображается высоким уровнем напряжения, а нулевое значение - низким уровнем.

![Импульсный и потенциальный сигналы](https://raw.githubusercontent.com/egormkn/ifmo-kt/master/course1/computer_architecture/images/signals.png)

---

### Мультиплекстор и демультиплексор

[Мультиплексор](http://www.youtube.com/watch?v=XSTeLCxEGuk) или шифратор ([wiki](https://ru.wikipedia.org/wiki/Мультиплексор_(электроника))) — логический элемент, получающий на вход 2^n булевых значений и n-значное число i в двоичном представлении и возвращающий значение на i-м входе.

[Демультиплексор](http://www.youtube.com/watch?v=itcG1loBmZ8) или дешифратор ([wiki](https://ru.wikipedia.org/wiki/Демультиплексор)) — логический элемент, получающий на вход булево значение X, n-значное число i в двоичном представлении и выводящий X на i-й из своих 2^n выходов и 0 на все остальные.

![Мультиплексор и демультиплексор](https://raw.githubusercontent.com/egormkn/ifmo-kt/master/course1/computer_architecture/images/mux-demux.png)

![Наращивание размерности мультиплексора и демультиплексора](https://raw.githubusercontent.com/egormkn/ifmo-kt/master/course1/computer_architecture/images/mux-demux-increase.png)

---

### Триггеры

**[Триггер](https://ru.wikipedia.org/wiki/Триггер)**  - это устройство последовательного типа с двумя устойчивыми состояниями равновесия, предназначенное для записи и хранения информации. Под действием входных сигналов триггер может переключаться из одного устойчивого состояния в другое. При этом напряжение на его выходе скачкообразно изменяется.

Как правило, триггер имеет два выхода: прямой и инверсный. Число входов зависит от структуры и функций, выполняемых триггером. По способу записи информации триггеры делят на **асинхронные** и **синхронизируемые** (тактируемые). В асинхронных триггерах информация может записываться непрерывно и определяется информационными сигналами, действующими на входах в данный момент времени. Если информация заносится в триггер только в момент действия так называемого синхронизирующего сигнала, поступающего на отдельный вход, то такой триггер называют синхронизируемым или тактируемым. Синхронизацию применяют для компенсации различий во времени передачи сигналов в логических схемах. Из асинхронного триггера можно сделать синхронный, добавив AND со входом синхронизации на каждый вход асинхронного триггера.
В цифровой технике приняты следующие обозначения входов триггеров:
- S (Set) - раздельный вход установки в единичное состояние (напряжение высокого уровня на прямом выходе Q)
- R (Reset) - раздельный вход сброса в нулевое состояние (напряжение низкого уровня на прямом выходе Q)
- D - информационный вход (на него подается информация, предназначенная для занесения в триггер)
- C - вход синхронизации
- Т - счетный вход


    TODO: Триггеры

---

### Регистры

**[Регистр](http://www.youtube.com/watch?v=rb4q_mIHaQ0)** ([wiki](https://ru.wikipedia.org/wiki/Регистр_(цифровая_техника))) — устройство, используемое для хранения n-разрядных двоичных данных и выполнения преобразований над ними. Регистр представляет собой упорядоченный набор триггеров. С каждым регистром обычно связано комбинационное цифровое устройство, с помощью которого обеспечивается выполнение некоторых операций над данными. Основой построения регистров являются: D-триггеры, RS-триггеры, JK-триггеры (в основном D).

Наиболее широко используются два типа: параллельные и сдвиговые регистры. В параллельных регистрах каждый триггер имеет свой независимый вход и выход, тактовые входы триггеров соединены между собой. По сути, параллельный регистр – это синхронизируемый триггер с несколькими входами и выходами. В сдвиговых регистрах все триггеры соединены в последовательную цепочку, тактовые входы также соединены. Входной сигнал в таком регистре последовательно перезаписывается из триггера в триггер по фронту тактового сигнала. 

    TODO: Регистры, модули памяти, счётчики, сумматоры

---

### Полезные ссылки

1. [Справочник по электронике (de.ifmo.ru)](http://de.ifmo.ru/--books/electron/)
2. [Как устроен процессор - от транзисторов к полным схемам (mnc.ru)](http://mnc.ru/?path=./cpu/)
3. [Курс "Цифровые устройства" (digteh.ru)](http://digteh.ru/digital/)
4. [Самоучитель по микропроцессорной технике (book.mirmk.net)](http://book.mirmk.net/book1/text/index.htm)
5. [Электротехника и электроника для программистов (youtube.com)](https://www.youtube.com/user/Zefar91)

---

### [<< Назад](https://github.com/egormkn/ifmo-kt/edit/master/course1/computer_architecture/README.md)
